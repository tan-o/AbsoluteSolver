# ================================================
# 【手势说明】
# ================================================
# 本系统支持以下手势操作：
#
# 1. 【捏合】(Pinch Gesture)
#    - 操作：用拇指和食指捏合
#    - 效果：左键点击 (鼠标按下并松开)
#    - 用途：点击网页元素、选择、打开应用等
#    - 调节：修改 gesture.pinch_threshold_on/off 调整灵敏度
#
# 2. 【旋转】(Rotation Gesture)
#    - 操作：在摄像头前上下摇手（不是转圈）
#    - 效果：鼠标滚轮 (向上摇=向下滚, 向下摇=向上滚)
#    - 用途：网页/文档滚动、调整音量等
#    - 调节：修改 gesture.rotation_* 参数调整灵敏度
#
# 3. 【头部跟踪】(Head Tracking)
#    - 操作：移动头部/转头看
#    - 效果：鼠标光标跟随头部移动
#    - 用途：精确定位和操控
#    - 调节：修改 mouse.sensitivity_x/y 调整灵敏度
#
# ================================================

camera:
  index: 0
  width: 640
  height: 480

window:
  title: "Absolute Solver - Rust Core"
  scale: 0.5

# 【新增】性能参数
performance:
  active_fps: 30 # 检测到手或脸时的帧率
  idle_fps: 2 # 没人时的帧率 (建议 1 ~ 10，越低越省电)

algorithm:
  hand:
    enabled: true # 【新增】是否启用手部检测 (捏合/旋转手势)
    stability: 0.7
    threshold: 0.8
    overlap: 1.0 # 手脸重叠屏蔽阈值

  face:
    enabled: true # 【新增】是否启用人脸检测 (头部鼠标控制)
    stability: 0.8
    threshold: 0.6

assets:
  avatar: "pictures/avatar.jpg"
  scale: 0.7 # 建议 0.6 ~ 0.8，完全覆盖头部

mouse:
  enabled: true
  track_mode: "hand" # 【新增】可选值: "head" 或 "hand"
  auto_screen_size: true
  manual_width: 1440.0
  manual_height: 900.0

  # 线性灵敏度: 头动 1 像素 = 鼠标动 X 像素
  # 【优化】增加灵敏度以提高跟随速度
  # 如果改为跟踪手模式，建议在跟踪头模式的灵敏度的基础上减去9
  sensitivity_x: 15.0
  sensitivity_y: 15.0

  # EMA 平滑系数 (0.01 ~ 1.0)
  # 【优化】增加平滑系数的值以减少延迟，但仍保持稳定
  # 越小越稳，越大越快。0.25 提供更好的实时性。
  smoothing: 0.20

  # 死区 (像素)
  # 小于此数值的头部微颤将被忽略
  # 【优化】降低死区使微弱移动也被响应
  dead_zone: 0.3

  invert_x: true
  invert_y: false

# 【新增】全局快捷键配置
shortcuts:
  # 格式：["修饰键1", "修饰键2", "按键"] (不区分大小写)
  # 随时开关鼠标连接
  toggle_mouse: ["LControl", "LAlt", "O"]
  # 重置鼠标中心锚点
  reset_center: ["LControl", "LAlt", "R"]
# ================================================
# 【新增】手势识别参数
# ================================================
gesture:
  # 捏合检测阈值
  # pinch_threshold_on: 按下阈值 (0.0 ~ 1.0)
  #   - 越小越灵敏，越容易检测到捏合
  #   - 推荐范围：0.20 ~ 0.35
  #   - 如果反应慢，尝试降低到 0.20
  pinch_threshold_on: 0.4

  # pinch_threshold_off: 松开阈值 (必须 > pinch_threshold_on)
  #   - 防止抖动误触，应该显著大于 on 阈值
  #   - 推荐范围：0.50 ~ 0.70
  pinch_threshold_off: 0.5

  # 旋转检测参数
  # rotation_threshold_degrees: 旋转触发阈值（角度制，单位：度）
  #   - 用于判断手相对于基准方向旋转了多少度才触发滚轮事件
  #   - 越小越灵敏，越容易触发滚轮
  #   - 推荐范围：30 ~ 60 度
  rotation_threshold_degrees: 30

  # rotation_cooldown_ms: 旋转冷却时间（毫秒）
  #   - 两次旋转事件之间的最小间隔
  #   - 推荐范围：200 ~ 500
  rotation_cooldown_ms: 250

# ================================================
# 【新增】调试配置
# ================================================
debug:
  # show_debug_window: 是否显示实时调试窗口
  #   - true: 显示原始帧 + 检测结果 (CPU占用高)
  #   - false: 隐藏调试窗口，只显示摄像头视图
  show_debug_window: false

  # window_always_on_top: 摄像头窗口是否置顶
  #   - true: 窗口始终在最前面
  #   - false: 窗口可被其他窗口遮挡
  window_always_on_top: true

inference:
  # 可选值:
  #   "auto"  (推荐: 自动尝试 CUDA -> 独显 -> CPU)
  #   "igpu"  (强制搜索核显并使用)
  #   "gpu"   (强制使用主显卡/独显)
  #   "cuda"  (强制使用 Nvidia CUDA,使用cuda请自行下载cudnn)
  #   "cpu"   (仅使用 CPU)
  device: "igpu"

  cpu_threads: 1
